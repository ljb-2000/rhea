.row
  .col-md-7
    - if @commands_process_counts.blank?
      %p Create a command! &#x2192;
    - else
      = form_tag update_all_commands_path, method: 'POST' do
        = hidden_field_tag :redirect_to, request.fullpath
        %table.table.table-striped
          %thead
            %tr
              %th Command
              %th Processes
              %th Desired Processes
              %th
          %tbody
            - @commands_process_counts.each do |command, process_count|
              %tr
                %td= command
                %td= process_count
                %td
                  = text_field_tag "commands_process_counts[#{command}]", nil, class: 'form-control', style: 'width: 50px;'
                %td
                  - if process_count == 0
                    = link_to 'Delete', delete_commands_path(command: CGI.escape(command)), class: 'btn btn-danger', style: 'margin-left: 10px;'
            %tr
              %td
              %td
              %td= submit_tag 'Save', class: 'btn btn-default'
              %td

  .col-md-5
    .panel.panel-default
      .panel-heading
        %h4 New Command
      .panel-body
        = form_tag commands_path, method: 'POST' do
          = hidden_field_tag :redirect_to, request.fullpath
          %table.table
            %thead
              %tr
                %th Type
                %th Input
                %th Processes
            %tbody
              %tr
                %td= select_tag :command_type_key, options_for_select(Rhea::CommandType.options_for_select, Rhea.settings[:default_command_type_key]), class: 'form-control', style: 'width: 90px;', required: 'required'
                %td= text_field_tag :command_type_input, nil, class: 'form-control', style: 'width: 230px;', required: 'required'
                %td= text_field_tag :process_count, nil, class: 'form-control', style: 'width: 50px;', required: 'required'
          = submit_tag 'Create', class: 'btn btn-default'

    .panel.panel-default
      .panel-heading
        %h4 Command Types
      .panel-body
        = render partial: 'rhea/command_types/list'
